patch:
- filename: /code/XiangShan/build/rtl/SimTop.sv
  diff: "--- a//code/XiangShan/build/rtl/SimTop.sv\n+++ b//code/XiangShan/build/rtl/SimTop.sv\n\
    @@ -3,6 +3,19 @@\n //Date:   Fri Jul 11 17:50:48 2025 +0800\n //\n //    fix(config):
    add missing IMSICParams in Poweroff (#4857)\n+//diff --git a/src/main/scala/xiangshan/frontend/IFU.scala
    b/src/main/scala/xiangshan/frontend/IFU.scala\n+//index 885e154ab..de9b53ec6 100644\n\
    +//--- a/src/main/scala/xiangshan/frontend/IFU.scala\n+//+++ b/src/main/scala/xiangshan/frontend/IFU.scala\n\
    +//@@ -254,7 +254,7 @@ class NewIFU(implicit p: Parameters) extends XSModule\n\
    +// \n+//   backend_redirect := fromFtq.redirect.valid\n+//   f3_flush       \
    \  := backend_redirect || (wb_redirect && !f3_wb_not_flush)\n+//-  f2_flush  \
    \       := backend_redirect || mmio_redirect || wb_redirect\n+//+  f2_flush  \
    \       := backend_redirect && mmio_redirect || wb_redirect\n+//   f1_flush  \
    \       := f2_flush\n+//   f0_flush         := f1_flush || f0_flush_from_bpu\n\
    +// \n // Generated by CIRCT firtool-1.62.1\n // Standard header to adapt well
    known macros for register randomization.\n `ifndef RANDOMIZE\n"
- filename: /code/XiangShan/build/rtl/NewCSR.sv
  diff: "--- a//code/XiangShan/build/rtl/NewCSR.sv\n+++ b//code/XiangShan/build/rtl/NewCSR.sv\n\
    @@ -2726,7 +2726,7 @@\n   wire         _mstatus_sstatus_SDT;\n   wire        \
    \ _mstatus_sstatus_SD;\n   wire [63:0]  _mstatus_sstatusRdata;\n-  wire      \
    \   gitDirty = 1'h0;\n+  wire         gitDirty = 1'h1;\n   wire [39:0]  gitCommitSHA
    = 40'h6B597582A7;\n   wire [63:0]  siregRData =\n     (_siselect_rdata == 64'h30
    ? _siprio0_rdata : 64'h0)\n"
- filename: /code/XiangShan/build/rtl/NewIFU.sv
  diff: "--- a//code/XiangShan/build/rtl/NewIFU.sv\n+++ b//code/XiangShan/build/rtl/NewIFU.sv\n\
    @@ -663,12 +663,15 @@\n \n   wire              wb_redirect_probe;\n   wire   \
    \           f3_wb_not_flush;\n-  wire              mmio_redirect;\n+  reg    \
    \           mmio_redirect_REG;\n   wire [15:0]       io_toIbuffer_bits_enqEnable_0;\n\
    \   wire              io_toIbuffer_valid_0;\n   reg               f3_lastHalf_valid;\n\
    \   wire              io_iTLBInter_resp_ready_0;\n   wire              f3_ready;\n\
    +  reg               f3_mmio_use_seq_pc;\n+  wire              _mmio_redirect_T;\n\
    +  wire              f3_req_is_mmio;\n   wire              icacheRespAllValid;\n\
    \   wire              f2_ready;\n   wire              f1_ready;\n@@ -1142,7 +1145,8
    @@\n   wire              f3_flush =\n     io_ftqInter_fromFtq_redirect_valid |
    wb_redirect_probe & ~f3_wb_not_flush;\n   wire              f2_flush =\n-    io_ftqInter_fromFtq_redirect_valid
    | mmio_redirect | wb_redirect_probe;\n+    io_ftqInter_fromFtq_redirect_valid
    & f3_req_is_mmio & _mmio_redirect_T\n+    & mmio_redirect_REG & f3_mmio_use_seq_pc
    | wb_redirect_probe;\n   assign io_ftqInter_fromFtq_req_ready_0 = f1_ready & io_icacheInter_icacheReady;\n\
    \   wire              _GEN_13 =\n     ~io_ftqInter_fromFtq_req_valid & io_ftqInter_fromFtq_req_ready_0;\n\
    @@ -1639,11 +1643,11 @@\n   reg  [2:0]        io_mmioCommitRead_mmioFtqPtr_REG_value;\n\
    \   reg  [3:0]        mmio_state;\n   wire              _mmio_state_T_14 = f3_itlb_pbmt
    == 2'h1;\n-  wire              f3_req_is_mmio =\n+  assign f3_req_is_mmio =\n\
    \     f3_valid & (f3_pmp_mmio | _mmio_state_T_14 | f3_itlb_pbmt == 2'h2)\n   \
    \  & ~((|f3_exception_0) | (|f3_exception_1));\n   wire              f3_mmio_req_commit
    = f3_req_is_mmio & mmio_state == 4'hA;\n-  wire              _mmio_redirect_T
    = mmio_state == 4'h9;\n+  assign _mmio_redirect_T = mmio_state == 4'h9;\n   wire\
    \              f3_mmio_to_commit = f3_req_is_mmio & _mmio_redirect_T;\n   reg\
    \               f3_mmio_to_commit_next;\n   reg               fromFtqRedirectReg_bits_r_ftqIdx_flag;\n\
    @@ -1658,7 +1662,6 @@\n     fromFtqRedirectReg_valid_REG\n     & (fromFtqRedirectReg_bits_r_ftqIdx_flag
    ^ f3_ftq_req_ftqIdx_flag\n        ^ fromFtqRedirectReg_bits_r_ftqIdx_value < f3_ftq_req_ftqIdx_value);\n\
    -  reg               f3_mmio_use_seq_pc;\n   reg               REG;\n   assign
    f3_ready =\n     io_toIbuffer_ready & (f3_mmio_req_commit | ~f3_req_is_mmio) |
    ~f3_valid;\n@@ -1936,9 +1939,6 @@\n                f3_instr_valid_2,\n       \
    \         f3_instr_valid_1,\n                ~f3_lastHalf_valid};\n-  reg    \
    \           mmio_redirect_REG;\n-  assign mmio_redirect =\n-    f3_req_is_mmio
    & _mmio_redirect_T & mmio_redirect_REG & f3_mmio_use_seq_pc;\n   wire        \
    \      _GEN_32 = io_toIbuffer_valid_0 & ~io_toIbuffer_ready;\n   reg         \
    \      wb_enable_REG;\n   wire              wb_enable = wb_enable_REG & ~f3_req_is_mmio
    & ~f3_flush;\n"
- filename: /code/XiangShan/build/rtl/CommitIDModule.sv
  diff: "--- a//code/XiangShan/build/rtl/CommitIDModule.sv\n+++ b//code/XiangShan/build/rtl/CommitIDModule.sv\n\
    @@ -91,7 +91,7 @@\n   PrintCommitIDModule printCommitIDMod (\n     .hartID   (io_hartId),\n\
    \     .commitID (40'h6B597582A7),\n-    .dirty    (1'h0)\n+    .dirty    (1'h1)\n\
    \   );\n endmodule\n \n"
